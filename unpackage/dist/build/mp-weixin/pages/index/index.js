(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"269b":function(e,t,i){"use strict";(function(e){i("5ea8");a(i("66fd"));var t=a(i("3e66"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},"3e66":function(e,t,i){"use strict";i.r(t);var a=i("550f"),n=i("4cc2");for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("4574");var l,s=i("f0c5"),p=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],l);t["default"]=p.exports},4574:function(e,t,i){"use strict";var a=i("fb56"),n=i.n(a);n.a},"4cc2":function(e,t,i){"use strict";i.r(t);var a=i("a909"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"550f":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement;e._self._c},o=[]},a909:function(e,t,i){"use strict";(function(e){function i(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={data:function(){return{img_url:this.$config.imgPath,validateCodePath:this.$config.validateCodePath,param:{hotlineAppealPerson:"",hotlineAppealPersonSex:"",hotlineAppealPersonPhone:"",queryCode:"",captcha:"",hotlineAppealTitle:"",hotlineAppealContent:"",hotlineAppealCategoryCode:"1",hotlineAppealTypeCode:"",hotlineAppealType:"",hotlineAppealJurisdictionCode:"",hotlineAppealJurisdiction:"",hotlineAppealPersonEmail:"",hotlineAppealExternal:"",hotlineAppealIspublic:0},index:0,hotlineAppealPersonSex:"",pickerDate_sex:this.$configType.sex_enum,hotlineAppealTypeDate:[],pickerDate:[],pickerDate_area:[],hotlineAppealTypeId:"1",hotlineAppealType:"咨询",placeholder:"请填写诉求内容，诉求内容不能超过1000字",appealContent_num:"0/1000",imageList:[],videoList:[],fileList:[],checkRes:!1,fileStatus:!0,cacheStatus:!0,hotlineAppealIspublic:!0}},onLoad:function(){this.appealContent_num="0/1000",this.handler_appealType(),this.handler_appealCategory(),this.getAppealJurisdiction(),this.validateCode()},methods:{handler_person:function(e){this.param.hotlineAppealPerson=e.detail.value},handlerPicker_sex:function(e){var t=this.pickerDate_sex[e.detail.value];this.param.hotlineAppealPersonSex=t.value,this.hotlineAppealPersonSex=t.label},handler_phone:function(t){if(t.detail.value){this.param.hotlineAppealPersonPhone=t.detail.value;var i=/^(13[0-9]|14[1579]|15[0-3,5-9]|16[6]|17[0123456789]|18[0-9]|19[89])\d{8}$/;i.test(t.detail.value)||e.showToast({title:"手机号码不正确",icon:"none"})}},handler_captcha:function(t){var i=this;t.detail.value?(this.param.captcha=t.detail.value,this.$minApi.wechat_matchPic({cache:this.param.captcha}).then((function(t){200==t.code?i.cacheStatus=!0:(t.code,e.showToast({title:t.message,icon:"none"}),i.cacheStatus=!1)}))):e.showToast({title:"请输图形验证码"})},validateCode:function(){this.validateCodePath=this.validateCodePath+"?d="+Math.random(),this.param.captcha=""},handler_queryCode:function(){this.param.hotlineAppealPersonPhone?this.$minApi.verificationCode({phoneNumber:this.param.hotlineAppealPersonPhone}).then((function(t){200==t.code?e.showModal({title:"温馨提示",content:"请注意查收短信验证码哦",showCancel:!1,confirmText:"知道啦"}):e.showToast({title:t.message})})):e.showToast({title:"请填写手机号"})},handler_appealType:function(){var t=this;this.$minApi.getAppealCategory().then((function(i){200==i.code?i.data.length>0&&(t.hotlineAppealTypeDate=i.data):e.showToast({title:i.message})}))},handleBtnType:function(e){this.param.hotlineAppealCategoryCode=e.hotlineAppealCategoryCode},handler_appealCategory:function(){var t=this;this.$minApi.getAppealType().then((function(i){200==i.code?i.data.length>0&&(t.pickerDate=i.data):e.showToast({title:i.message})}))},handlerPicker:function(e){this.param.hotlineAppealTypeCode=this.pickerDate[e.detail.value].hotlineAppealTypeCode,this.param.hotlineAppealType=this.pickerDate[e.detail.value].hotlineAppealType},getAppealJurisdiction:function(){var t=this;this.$minApi.getAppealJurisdiction().then((function(i){200==i.code?i.data.length>0&&(t.pickerDate_area=i.data):e.showToast({title:i.message})}))},handlerPicker_area:function(e){this.param.hotlineAppealJurisdictionCode=this.pickerDate_area[e.detail.value].hotlineAppealJurisdictionCode,this.param.hotlineAppealJurisdiction=this.pickerDate_area[e.detail.value].hotlineAppealJurisdiction},handler_textarea:function(e){"input"==e.type&&(this.appealContent_num=e.detail.cursor+"/1000"),this.param.hotlineAppealContent=e.detail.value},handler_content:function(e){"blur"==e.type&&(this.appealContent_num=e.detail.cursor+"/1000"),this.param.hotlineAppealContent=e.detail.value},handler_maxcount:function(t){this.imageList.length+this.videoList.length+this.fileList.length>=5?e.showModal({title:"提示",content:"图片和视频和附件最多上传5张",showCancel:!1,confirmText:"知道啦"}):0==t?this.chooseImage():1==t?this.chooseVideo():this.chooseFile()},chooseImage:function(){var t=this;e.chooseImage({sourceType:["album"],extension:[".jpg",".jpeg",".bmp",".gif",".png",".tiff"],count:5,success:function(i){i.tempFilePaths;e.showLoading({title:"加载中"});for(var a=function(a){e.uploadFile({url:"/picture-web/outer/photo/uploadFile",filePath:i.tempFilePaths[a],formData:{user:i.tempFiles[a],file:i.tempFiles[a]},name:"file",success:function(i){e.hideLoading();var a=JSON.parse(i.data);if("0"==a.code){var n={name:a.data.fileName+"."+a.data.contentType,url:a.data.filePath};t.imageList.push(n),console.log(t.imageList)}},fail:function(t){e.showToast({title:"第"+a+"张上传失败"})}})},n=0;n<5;n++)a(n)},fail:function(e){}})},handle_delete_img:function(e,t){this.imageList.splice(t,1)},handle_delete_video:function(e,t){this.videoList.splice(t,1)},handle_delete_file:function(e,t){this.fileList.splice(t,1)},previewImage:function(t){var i=t.target.dataset.src,a=[];this.imageList.map((function(e){a.push("/"+e)})),e.previewImage({current:i,urls:a})},chooseVideo:function(){var t=this;e.chooseVideo({count:5,extension:[".avi",".wma",".rmvb",".mp4",".3gp",".mid"],success:function(i){e.showLoading({title:"加载中"}),console.log(i.tempFilePath,i.tempFiles);e.uploadFile({url:"/picture-web/outer/photo/uploadFile",filePath:i.tempFilePath,formData:{user:i.tempFiles,file:i.tempFiles},name:"file",success:function(i){e.hideLoading();var a=JSON.parse(i.data);if(console.log(a),"0"==a.code){var n={name:a.data.fileName+"."+a.data.contentType,url:a.data.filePath};t.videoList.push(n),console.log(t.videoList)}},fail:function(e){}})}})},chooseFile:function(){var t=this;e.chooseFile({count:5,extension:[".doc",".txt"],success:function(i){e.showLoading({title:"加载中"}),console.log(i.tempFilePath,i.tempFiles);e.uploadFile({url:"/picture-web/outer/photo/uploadFile",filePath:i.tempFilePath,formData:{user:i.tempFiles[0],file:i.tempFiles[0]},name:"file",success:function(i){e.hideLoading();var a=JSON.parse(i.data);if(console.log(a),"0"==a.code){this.fileStatus=!0;var n={url:a.data.filePath,name:a.data.fileName+"."+a.data.contentType};t.fileList.push(n),console.log(t.fileList)}},fail:function(e){this.fileStatus=!1}})}})},handle_swith:function(e){0==e.detail.value?(this.hotlineAppealIspublic=!1,this.param.hotlineAppealIspublic=1):(this.hotlineAppealIspublic=!0,this.param.hotlineAppealIspublic=0)},handler_register:function(){this.param.hotlineAppealPerson?this.param.hotlineAppealPersonSex?this.param.hotlineAppealPersonPhone?this.param.captcha?this.param.queryCode?this.param.hotlineAppealTitle?this.param.hotlineAppealTypeCode?this.param.hotlineAppealJurisdictionCode?this.param.hotlineAppealContent?(this.param.hotlineAppealExternal=this.imageList.concat(this.videoList,this.fileList),console.log(this.param.hotlineAppealExternal),this.checkRes=!0,this.handler_btn()):e.showToast({title:"请填写诉求内容",icon:"none"}):e.showToast({title:"请选择事件辖区",icon:"none"}):e.showToast({title:"请选择诉求类别",icon:"none"}):e.showToast({title:"请填诉标题",icon:"none"}):e.showToast({title:"请填短信验证码",icon:"none"}):e.showToast({title:"请填图形验证码",icon:"none"}):e.showToast({title:"请填写手机号",icon:"none"}):e.showToast({title:"请选择性别",icon:"none"}):e.showToast({title:"请填写姓名",icon:"none"})},handler_btn:function(){var t=this;this.checkRes&&this.$minApi.saveOpenApiAppeal(a({},this.param)).then((function(i){200==i.code?(e.showModal({title:"温馨提示",content:"登记成功,请耐心等待回复哦",showCancel:!1,confirmText:"知道啦"}),t.handler_clear()):(i.code,e.showToast({title:data.message,icon:"none"}))})).then((function(e){}))},handler_clear:function(){this.param={hotlineAppealPerson:"",hotlineAppealPersonSex:"",hotlineAppealPersonPhone:"",queryCode:"",captcha:"",hotlineAppealTitle:"",hotlineAppealContent:"",hotlineAppealTypeCode:"",hotlineAppealType:"",hotlineAppealJurisdictionCode:"",hotlineAppealJurisdiction:"",hotlineAppealPersonEmail:"",hotlineAppealExternal:"",hotlineAppealIspublic:!0},this.appealContent_num="0/1000",this.imageList=[],this.videoList=[],this.fileList=[]}}};t.default=o}).call(this,i("543d")["default"])},fb56:function(e,t,i){}},[["269b","common/runtime","common/vendor"]]]);